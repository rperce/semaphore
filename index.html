<html>
    <head>
        <title>Semaphore Ascii</title>
    </head>
    <body>
        <textarea id="plaintext" cols="50" rows="5">ASCII</textarea>
        <textarea id="semaphore" cols="50" rows="5"></textarea>
        <script>
var conv = {a: '/°|',
            b: '-°|',
            c: '\\°|',
            d:  '|°|',
            e: '|°/',
            f: '|°-',
            g: '|°\\',
            h: '-/o',
            i: '>o ',
            j: '|o-',
            k: '/o|',
            l: '/o/',
            m: '/o-',
            n: '/o\\',
            o: '-\\o',
            p: '-o|',
            q: '-o/',
            r: '-o-',
            s: '-o\\',
            t: '\\o|',
            u: '\\o/',
            v: '|o\\',
            w: 'o/-',
            x: 'o< ',
            y: '\\o-',
            z: 'o\\-'};
var rev = {};
Object.keys(conv).forEach(function(k) { rev[conv[k]] = k; });

var plaintext = document.getElementById('plaintext');
var semaphore = document.getElementById('semaphore');
var setSemVal = function() {
    semaphore.value = plaintext.value.split('').map(function(chr) {
        return conv[chr.toLowerCase()] || (' ' + chr + ' ');
    }).join(' ');
};
var setPlnVal = function() {
    plaintext.value = semaphore.value.match(/.{1,4}/g).map(function(phr) {
        var p = phr.trim();
        return rev[p] || rev[p + ' '] || p;
    }).join('').toUpperCase();
};
plaintext.addEventListener('keyup', setSemVal);
plaintext.addEventListener('paste', setSemVal);
semaphore.addEventListener('keyup', setPlnVal);
semaphore.addEventListener('paste', setPlnVal);
setSemVal();
        </script>
    </body>
</html>

